#!/bin/bash
echo ""

echo ""
echo -e "\e[1;46m ============================== \e[0m"
echo -e "\e[1;46m 🛡️ Generate black, white lists  \e[0m"
echo -e "\e[1;46m ============================== \e[0m"

if ! [ $(id -u) = 0 ]; then
  echo -e "\e[1;41m This script must run as ROOT \e[0m"
  exit
fi

source "/usr/local/turbolab.it/zzfirewall/base.sh"

printMessage "🤝 Generate whitelist..."
php ${SCRIPT_DIR}firewall/generate-whitelist.php

printMessage "🧱 Generate blacklist..."
#php ${SCRIPT_DIR}firewall/generate-blacklist.php

printMessage "✔️ Git commit..."
#git -C ${SCRIPT_DIR} add ${SCRIPT_DIR}lists/autogen/whitelist.txt
#git -C ${SCRIPT_DIR} add ${SCRIPT_DIR}lists/autogen/blacklist.txt
#git -C ${SCRIPT_DIR} commit -m"🧱 autogenerated firewall lists update"

printMessage "☁️ Git pull and push..."
#git -C ${SCRIPT_DIR} pull --no-edit
#git -C ${SCRIPT_DIR} push

