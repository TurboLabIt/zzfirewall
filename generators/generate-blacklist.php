<?php
require 'generate.lib.php';

const OUT_PATH = '/usr/local/turbolab.it/zzfirewall/lists/autogen/';


const GOOGLE_CLOUD_LIST_URL = 'https://www.gstatic.com/ipranges/cloud.json';
echo "⚙️ Building Google Cloud list from " . GOOGLE_CLOUD_LIST_URL . "..." . PHP_EOL;
$txtGoogleCloud = implode(PHP_EOL, getGoogleIpList(GOOGLE_CLOUD_LIST_URL) ) . PHP_EOL;

$filePath = OUT_PATH . 'google-cloud.txt';
echo "⚙️ Writing the file to $filePath..." . PHP_EOL;
file_put_contents($filePath, $txtGoogleCloud);


/**
 * Banner
 * ======
 */
echo "⚙️ Adding banner..." . PHP_EOL;
$txtBlacklist  = '## ☠️ WARNING! This file was AUTOGENERATED by zzfirewall - Do not edit directly!';
$txtBlacklist .= PHP_EOL . '## See: https://github.com/TurboLabIt/zzfirewall/';


// add any other blacklist item here


/**
 * Writing the file...
 * ===================
 */
$filePath = OUT_PATH . 'blacklist.txt';
echo "⚙️ Writing the file to $filePath..." . PHP_EOL;
file_put_contents($filePath, $txtBlacklist);

echo PHP_EOL . "✅ " .basename(__FILE__, '.php') . " is DONE" . PHP_EOL;
