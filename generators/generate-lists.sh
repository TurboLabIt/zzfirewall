#!/bin/bash
echo ""

source "/usr/local/turbolab.it/zzfirewall/base.sh"
printHeader "üõ°Ô∏è Generate black, white lists"
rootCheck

printMessage "Generate whitelist..."
php ${SCRIPT_DIR}firewall/generate-whitelist.php

printMessage "Generate blacklist..."
php ${SCRIPT_DIR}firewall/generate-blacklist.php

printMessage "Git commit..."
git -C ${SCRIPT_DIR} add ${SCRIPT_DIR}lists/autogen/whitelist.txt
git -C ${SCRIPT_DIR} add ${SCRIPT_DIR}lists/autogen/blacklist.txt
git -C ${SCRIPT_DIR} commit -m"üß± autogenerated firewall lists update"

printMessage "Git pull and push..."
git -C ${SCRIPT_DIR} pull --no-edit
git -C ${SCRIPT_DIR} push

